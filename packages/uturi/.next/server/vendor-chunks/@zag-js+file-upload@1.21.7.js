"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@zag-js+file-upload@1.21.7";
exports.ids = ["vendor-chunks/@zag-js+file-upload@1.21.7"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@zag-js+file-upload@1.21.7/node_modules/@zag-js/file-upload/dist/index.mjs":
/*!***********************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@zag-js+file-upload@1.21.7/node_modules/@zag-js/file-upload/dist/index.mjs ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anatomy: () => (/* binding */ anatomy),\n/* harmony export */   connect: () => (/* binding */ connect),\n/* harmony export */   itemProps: () => (/* binding */ itemProps),\n/* harmony export */   machine: () => (/* binding */ machine),\n/* harmony export */   props: () => (/* binding */ props),\n/* harmony export */   splitItemProps: () => (/* binding */ splitItemProps),\n/* harmony export */   splitProps: () => (/* binding */ splitProps)\n/* harmony export */ });\n/* harmony import */ var _zag_js_anatomy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @zag-js/anatomy */ \"(ssr)/../../node_modules/.pnpm/@zag-js+anatomy@1.21.7/node_modules/@zag-js/anatomy/dist/index.mjs\");\n/* harmony import */ var _zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @zag-js/dom-query */ \"(ssr)/../../node_modules/.pnpm/@zag-js+dom-query@1.21.7/node_modules/@zag-js/dom-query/dist/index.mjs\");\n/* harmony import */ var _zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @zag-js/file-utils */ \"(ssr)/../../node_modules/.pnpm/@zag-js+file-utils@1.21.7/node_modules/@zag-js/file-utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_i18n_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @zag-js/i18n-utils */ \"(ssr)/../../node_modules/.pnpm/@zag-js+i18n-utils@1.21.7/node_modules/@zag-js/i18n-utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @zag-js/types */ \"(ssr)/../../node_modules/.pnpm/@zag-js+types@1.21.7/node_modules/@zag-js/types/dist/index.mjs\");\n/* harmony import */ var _zag_js_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @zag-js/utils */ \"(ssr)/../../node_modules/.pnpm/@zag-js+utils@1.21.7/node_modules/@zag-js/utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @zag-js/core */ \"(ssr)/../../node_modules/.pnpm/@zag-js+core@1.21.7/node_modules/@zag-js/core/dist/index.mjs\");\n\n\n\n\n\n\n\n\n// src/file-upload.anatomy.ts\nvar anatomy = (0,_zag_js_anatomy__WEBPACK_IMPORTED_MODULE_0__.createAnatomy)(\"file-upload\").parts(\n  \"root\",\n  \"dropzone\",\n  \"item\",\n  \"itemDeleteTrigger\",\n  \"itemGroup\",\n  \"itemName\",\n  \"itemPreview\",\n  \"itemPreviewImage\",\n  \"itemSizeText\",\n  \"label\",\n  \"trigger\",\n  \"clearTrigger\"\n);\nvar parts = anatomy.build();\n\n// src/file-upload.dom.ts\nvar getRootId = (ctx) => ctx.ids?.root ?? `file:${ctx.id}`;\nvar getDropzoneId = (ctx) => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`;\nvar getHiddenInputId = (ctx) => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`;\nvar getTriggerId = (ctx) => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`;\nvar getLabelId = (ctx) => ctx.ids?.label ?? `file:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`;\nvar getItemNameId = (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`;\nvar getItemSizeTextId = (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`;\nvar getItemPreviewId = (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`;\nvar getRootEl = (ctx) => ctx.getById(getRootId(ctx));\nvar getHiddenInputEl = (ctx) => ctx.getById(getHiddenInputId(ctx));\nvar getDropzoneEl = (ctx) => ctx.getById(getDropzoneId(ctx));\nfunction isEventWithFiles(event) {\n  const target = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventTarget)(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some((type) => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount, currentAcceptedFiles) {\n  const { prop, computed } = ctx;\n  if (!computed(\"multiple\") && incomingCount > 1) return false;\n  if (!computed(\"multiple\") && incomingCount + currentAcceptedFiles.length === 2) return true;\n  if (incomingCount + currentAcceptedFiles.length > prop(\"maxFiles\")) return false;\n  return true;\n}\nfunction getEventFiles(ctx, files, currentAcceptedFiles = [], currentRejectedFiles = []) {\n  const { prop, computed } = ctx;\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  const validateParams = {\n    acceptedFiles: currentAcceptedFiles,\n    rejectedFiles: currentRejectedFiles\n  };\n  files.forEach((file) => {\n    const [accepted, acceptError] = (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isValidFileType)(file, computed(\"acceptAttr\"));\n    const [sizeMatch, sizeError] = (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isValidFileSize)(file, prop(\"minFileSize\"), prop(\"maxFileSize\"));\n    const validateErrors = prop(\"validate\")?.(file, validateParams);\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...validateErrors ?? []);\n      rejectedFiles.push({ file, errors: errors.filter(Boolean) });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length, currentAcceptedFiles)) {\n    acceptedFiles.forEach((file) => {\n      rejectedFiles.push({ file, errors: [\"TOO_MANY_FILES\"] });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\nfunction setInputFiles(inputEl, files) {\n  const win = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getWindow)(inputEl);\n  try {\n    if (\"DataTransfer\" in win) {\n      const dataTransfer = new win.DataTransfer();\n      files.forEach((file) => {\n        dataTransfer.items.add(file);\n      });\n      inputEl.files = dataTransfer.files;\n    }\n  } catch {\n  }\n}\n\n// src/file-upload.connect.ts\nfunction connect(service, normalize) {\n  const { state, send, prop, computed, scope, context } = service;\n  const disabled = prop(\"disabled\");\n  const allowDrop = prop(\"allowDrop\");\n  const translations = prop(\"translations\");\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    transforming: context.get(\"transforming\"),\n    openFilePicker() {\n      if (disabled) return;\n      send({ type: \"OPEN\" });\n    },\n    deleteFile(file) {\n      send({ type: \"FILE.DELETE\", file });\n    },\n    acceptedFiles: context.get(\"acceptedFiles\"),\n    rejectedFiles: context.get(\"rejectedFiles\"),\n    setFiles(files) {\n      send({ type: \"FILES.SET\", files, count: files.length });\n    },\n    clearRejectedFiles() {\n      send({ type: \"REJECTED_FILES.CLEAR\" });\n    },\n    clearFiles() {\n      send({ type: \"FILES.CLEAR\" });\n    },\n    getFileSize(file) {\n      return (0,_zag_js_i18n_utils__WEBPACK_IMPORTED_MODULE_3__.formatBytes)(file.size, prop(\"locale\"));\n    },\n    createFileUrl(file, cb) {\n      const win = scope.getWin();\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({ type: \"FILES.SET\", files });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-dragging\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: prop(\"dir\"),\n        id: getDropzoneId(scope),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-dragging\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (!(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isSelfTarget)(event)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({ type: \"DROPZONE.CLICK\", src: \"keydown\" });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          if (!(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isSelfTarget)(event)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send({ type: \"DROPZONE.CLICK\" });\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({ type: \"DROPZONE.DRAG_OVER\", count });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.contains)(event.currentTarget, event.relatedTarget)) return;\n          send({ type: \"DROPZONE.DRAG_LEAVE\" });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.getFileEntries)(event.dataTransfer.items, prop(\"directory\")).then((files) => {\n            send({ type: \"DROPZONE.DROP\", files: (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.flatArray)(files) });\n          });\n        },\n        onFocus() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.FOCUS\" });\n        },\n        onBlur() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.BLUR\" });\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: prop(\"dir\"),\n        id: getTriggerId(scope),\n        disabled,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.contains)(getDropzoneEl(scope), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send({ type: \"OPEN\" });\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: getHiddenInputId(scope),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: prop(\"required\"),\n        capture: prop(\"capture\"),\n        name: prop(\"name\"),\n        accept: computed(\"acceptAttr\"),\n        webkitdirectory: prop(\"directory\") ? \"\" : void 0,\n        multiple: computed(\"multiple\") || prop(\"maxFiles\") > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const { files } = event.currentTarget;\n          send({ type: \"FILE.SELECT\", files: files ? Array.from(files) : [] });\n        },\n        style: _zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps() {\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        id: getItemId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemNameProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: prop(\"dir\"),\n        id: getItemNameId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: prop(\"dir\"),\n        id: getItemSizeTextId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemPreviewProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: prop(\"dir\"),\n        id: getItemPreviewId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const { file, url } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const { file } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({ type: \"FILE.DELETE\", file });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        htmlFor: getHiddenInputId(scope),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        hidden: context.get(\"acceptedFiles\").length === 0,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({ type: \"FILES.CLEAR\" });\n        }\n      });\n    }\n  };\n}\nvar machine = (0,_zag_js_core__WEBPACK_IMPORTED_MODULE_5__.createMachine)({\n  props({ props: props2 }) {\n    return {\n      minFileSize: 0,\n      maxFileSize: Number.POSITIVE_INFINITY,\n      maxFiles: 1,\n      allowDrop: true,\n      preventDocumentDrop: true,\n      defaultAcceptedFiles: [],\n      ...props2,\n      translations: {\n        dropzone: \"dropzone\",\n        itemPreview: (file) => `preview of ${file.name}`,\n        deleteFile: (file) => `delete file ${file.name}`,\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"idle\";\n  },\n  context({ prop, bindable, getContext }) {\n    return {\n      acceptedFiles: bindable(() => ({\n        defaultValue: prop(\"defaultAcceptedFiles\"),\n        value: prop(\"acceptedFiles\"),\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(file, b[i])),\n        hash(value) {\n          return value.map((file) => `${file.name}-${file.size}`).join(\",\");\n        },\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileAccept\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: value, rejectedFiles: ctx.get(\"rejectedFiles\") });\n        }\n      })),\n      rejectedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(file.file, b[i].file)),\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileReject\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: ctx.get(\"acceptedFiles\"), rejectedFiles: value });\n        }\n      })),\n      transforming: bindable(() => ({\n        defaultValue: false\n      }))\n    };\n  },\n  computed: {\n    acceptAttr: ({ prop }) => (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.getAcceptAttrString)(prop(\"accept\")),\n    multiple: ({ prop }) => prop(\"maxFiles\") > 1\n  },\n  watch({ track, context, action }) {\n    track([() => context.hash(\"acceptedFiles\")], () => {\n      action([\"syncInputElement\"]);\n    });\n  },\n  on: {\n    \"FILES.SET\": {\n      actions: [\"setFiles\"]\n    },\n    \"FILE.SELECT\": {\n      actions: [\"setEventFiles\"]\n    },\n    \"FILE.DELETE\": {\n      actions: [\"removeFile\"]\n    },\n    \"FILES.CLEAR\": {\n      actions: [\"clearFiles\"]\n    },\n    \"REJECTED_FILES.CLEAR\": {\n      actions: [\"clearRejectedFiles\"]\n    }\n  },\n  effects: [\"preventDocumentDrop\"],\n  states: {\n    idle: {\n      on: {\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.FOCUS\": {\n          target: \"focused\"\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    focused: {\n      on: {\n        \"DROPZONE.BLUR\": {\n          target: \"idle\"\n        },\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    dragging: {\n      on: {\n        \"DROPZONE.DROP\": {\n          target: \"idle\",\n          actions: [\"setEventFiles\"]\n        },\n        \"DROPZONE.DRAG_LEAVE\": {\n          target: \"idle\"\n        }\n      }\n    }\n  },\n  implementations: {\n    effects: {\n      preventDocumentDrop({ prop, scope }) {\n        if (!prop(\"preventDocumentDrop\")) return;\n        if (!prop(\"allowDrop\")) return;\n        if (prop(\"disabled\")) return;\n        const doc = scope.getDoc();\n        const onDragOver = (event) => {\n          event?.preventDefault();\n        };\n        const onDrop = (event) => {\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.contains)(getRootEl(scope), (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventTarget)(event))) return;\n          event.preventDefault();\n        };\n        return (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.callAll)((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.addDomEvent)(doc, \"dragover\", onDragOver, false), (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.addDomEvent)(doc, \"drop\", onDrop, false));\n      }\n    },\n    actions: {\n      syncInputElement({ scope, context }) {\n        queueMicrotask(() => {\n          const inputEl = getHiddenInputEl(scope);\n          if (!inputEl) return;\n          setInputFiles(inputEl, context.get(\"acceptedFiles\"));\n          const win = scope.getWin();\n          inputEl.dispatchEvent(new win.Event(\"change\", { bubbles: true }));\n        });\n      },\n      openFilePicker({ scope }) {\n        (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => {\n          getHiddenInputEl(scope)?.click();\n        });\n      },\n      setFiles(params) {\n        const { computed, context, event } = params;\n        const { acceptedFiles, rejectedFiles } = getEventFiles(params, event.files);\n        context.set(\n          \"acceptedFiles\",\n          computed(\"multiple\") ? acceptedFiles : acceptedFiles.length > 0 ? [acceptedFiles[0]] : []\n        );\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      setEventFiles(params) {\n        const { computed, context, event, prop } = params;\n        const currentAcceptedFiles = context.get(\"acceptedFiles\");\n        const currentRejectedFiles = context.get(\"rejectedFiles\");\n        const { acceptedFiles, rejectedFiles } = getEventFiles(\n          params,\n          event.files,\n          currentAcceptedFiles,\n          currentRejectedFiles\n        );\n        const set = (files) => {\n          if (computed(\"multiple\")) {\n            context.set(\"acceptedFiles\", (prev) => [...prev, ...files]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (files.length) {\n            context.set(\"acceptedFiles\", [files[0]]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (rejectedFiles.length) {\n            context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n            context.set(\"rejectedFiles\", rejectedFiles);\n          }\n        };\n        const transform = prop(\"transformFiles\");\n        if (transform) {\n          context.set(\"transforming\", true);\n          transform(acceptedFiles).then(set).catch((err) => {\n            (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.warn)(`[zag-js/file-upload] error transforming files\n${err}`);\n          }).finally(() => {\n            context.set(\"transforming\", false);\n          });\n        } else {\n          set(acceptedFiles);\n        }\n      },\n      removeFile({ context, event }) {\n        const files = context.get(\"acceptedFiles\").filter((file) => !(0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(file, event.file));\n        const rejectedFiles = context.get(\"rejectedFiles\").filter((item) => !(0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(item.file, event.file));\n        context.set(\"acceptedFiles\", files);\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      clearRejectedFiles({ context }) {\n        context.set(\"rejectedFiles\", []);\n      },\n      clearFiles({ context }) {\n        context.set(\"acceptedFiles\", []);\n        context.set(\"rejectedFiles\", []);\n      }\n    }\n  }\n});\nvar props = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_6__.createProps)()([\n  \"accept\",\n  \"acceptedFiles\",\n  \"allowDrop\",\n  \"capture\",\n  \"defaultAcceptedFiles\",\n  \"dir\",\n  \"directory\",\n  \"disabled\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"invalid\",\n  \"locale\",\n  \"maxFiles\",\n  \"maxFileSize\",\n  \"minFileSize\",\n  \"name\",\n  \"onFileAccept\",\n  \"onFileChange\",\n  \"onFileReject\",\n  \"preventDocumentDrop\",\n  \"required\",\n  \"transformFiles\",\n  \"translations\",\n  \"validate\"\n]);\nvar splitProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.createSplitProps)(props);\nvar itemProps = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_6__.createProps)()([\"file\"]);\nvar splitItemProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.createSplitProps)(itemProps);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0B6YWctanMrZmlsZS11cGxvYWRAMS4yMS43L25vZGVfbW9kdWxlcy9AemFnLWpzL2ZpbGUtdXBsb2FkL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ3VGO0FBQ2Y7QUFDdkU7QUFDTDtBQUMrQjtBQUM5Qjs7QUFFN0M7QUFDQSxjQUFjLDhEQUFhO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrREFBa0QsT0FBTztBQUN6RCwwREFBMEQsT0FBTztBQUNqRSxnRUFBZ0UsT0FBTztBQUN2RSx3REFBd0QsT0FBTztBQUMvRCxvREFBb0QsT0FBTztBQUMzRCw0REFBNEQsT0FBTyxRQUFRLEdBQUc7QUFDOUUsb0VBQW9FLE9BQU8sYUFBYSxHQUFHO0FBQzNGLDRFQUE0RSxPQUFPLGFBQWEsR0FBRztBQUNuRywwRUFBMEUsT0FBTyxnQkFBZ0IsR0FBRztBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpRUFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFVBQVUsaUJBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsaUJBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG1FQUFlO0FBQ25ELG1DQUFtQyxtRUFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsMkJBQTJCLHNDQUFzQztBQUNqRTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMkJBQTJCLGtDQUFrQztBQUM3RCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNERBQVM7QUFDdkI7QUFDQTtBQUNB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QkFBK0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLGdCQUFnQixpQ0FBaUM7QUFDakQ7QUFDQTtBQUNBLGdCQUFnQiwrQkFBK0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1EQUFJO0FBQ2hCLEVBQUUsSUFBSTtBQUNOLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWCxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUCxtQkFBbUIsZ0JBQWdCO0FBQ25DLHFFQUFxRSwrREFBVztBQUNoRiw2RUFBNkUsK0RBQVc7QUFDeEY7QUFDQTtBQUNBLE9BQU87QUFDUCwyQkFBMkIsU0FBUztBQUNwQztBQUNBLE9BQU87QUFDUCxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFlBQVksMERBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwrREFBZ0I7QUFDakMsZ0JBQWdCLDBEQUFXO0FBQzNCLHFCQUFxQiwrREFBZ0I7O0FBRThDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHV0dXJpL3V0dXJpLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AemFnLWpzK2ZpbGUtdXBsb2FkQDEuMjEuNy9ub2RlX21vZHVsZXMvQHphZy1qcy9maWxlLXVwbG9hZC9kaXN0L2luZGV4Lm1qcz9lMTNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFuYXRvbXkgfSBmcm9tICdAemFnLWpzL2FuYXRvbXknO1xuaW1wb3J0IHsgcmFmLCBhZGREb21FdmVudCwgZ2V0V2luZG93LCBjb250YWlucywgZ2V0RXZlbnRUYXJnZXQsIGRhdGFBdHRyLCB2aXN1YWxseUhpZGRlblN0eWxlLCBpc1NlbGZUYXJnZXQgfSBmcm9tICdAemFnLWpzL2RvbS1xdWVyeSc7XG5pbXBvcnQgeyBnZXRBY2NlcHRBdHRyU3RyaW5nLCBpc0ZpbGVFcXVhbCwgaXNWYWxpZEZpbGVUeXBlLCBpc1ZhbGlkRmlsZVNpemUsIGdldEZpbGVFbnRyaWVzIH0gZnJvbSAnQHphZy1qcy9maWxlLXV0aWxzJztcbmltcG9ydCB7IGZvcm1hdEJ5dGVzIH0gZnJvbSAnQHphZy1qcy9pMThuLXV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVByb3BzIH0gZnJvbSAnQHphZy1qcy90eXBlcyc7XG5pbXBvcnQgeyB3YXJuLCBjYWxsQWxsLCBjcmVhdGVTcGxpdFByb3BzLCBmbGF0QXJyYXkgfSBmcm9tICdAemFnLWpzL3V0aWxzJztcbmltcG9ydCB7IGNyZWF0ZU1hY2hpbmUgfSBmcm9tICdAemFnLWpzL2NvcmUnO1xuXG4vLyBzcmMvZmlsZS11cGxvYWQuYW5hdG9teS50c1xudmFyIGFuYXRvbXkgPSBjcmVhdGVBbmF0b215KFwiZmlsZS11cGxvYWRcIikucGFydHMoXG4gIFwicm9vdFwiLFxuICBcImRyb3B6b25lXCIsXG4gIFwiaXRlbVwiLFxuICBcIml0ZW1EZWxldGVUcmlnZ2VyXCIsXG4gIFwiaXRlbUdyb3VwXCIsXG4gIFwiaXRlbU5hbWVcIixcbiAgXCJpdGVtUHJldmlld1wiLFxuICBcIml0ZW1QcmV2aWV3SW1hZ2VcIixcbiAgXCJpdGVtU2l6ZVRleHRcIixcbiAgXCJsYWJlbFwiLFxuICBcInRyaWdnZXJcIixcbiAgXCJjbGVhclRyaWdnZXJcIlxuKTtcbnZhciBwYXJ0cyA9IGFuYXRvbXkuYnVpbGQoKTtcblxuLy8gc3JjL2ZpbGUtdXBsb2FkLmRvbS50c1xudmFyIGdldFJvb3RJZCA9IChjdHgpID0+IGN0eC5pZHM/LnJvb3QgPz8gYGZpbGU6JHtjdHguaWR9YDtcbnZhciBnZXREcm9wem9uZUlkID0gKGN0eCkgPT4gY3R4Lmlkcz8uZHJvcHpvbmUgPz8gYGZpbGU6JHtjdHguaWR9OmRyb3B6b25lYDtcbnZhciBnZXRIaWRkZW5JbnB1dElkID0gKGN0eCkgPT4gY3R4Lmlkcz8uaGlkZGVuSW5wdXQgPz8gYGZpbGU6JHtjdHguaWR9OmlucHV0YDtcbnZhciBnZXRUcmlnZ2VySWQgPSAoY3R4KSA9PiBjdHguaWRzPy50cmlnZ2VyID8/IGBmaWxlOiR7Y3R4LmlkfTp0cmlnZ2VyYDtcbnZhciBnZXRMYWJlbElkID0gKGN0eCkgPT4gY3R4Lmlkcz8ubGFiZWwgPz8gYGZpbGU6JHtjdHguaWR9OmxhYmVsYDtcbnZhciBnZXRJdGVtSWQgPSAoY3R4LCBpZCkgPT4gY3R4Lmlkcz8uaXRlbT8uKGlkKSA/PyBgZmlsZToke2N0eC5pZH06aXRlbToke2lkfWA7XG52YXIgZ2V0SXRlbU5hbWVJZCA9IChjdHgsIGlkKSA9PiBjdHguaWRzPy5pdGVtTmFtZT8uKGlkKSA/PyBgZmlsZToke2N0eC5pZH06aXRlbS1uYW1lOiR7aWR9YDtcbnZhciBnZXRJdGVtU2l6ZVRleHRJZCA9IChjdHgsIGlkKSA9PiBjdHguaWRzPy5pdGVtU2l6ZVRleHQ/LihpZCkgPz8gYGZpbGU6JHtjdHguaWR9Oml0ZW0tc2l6ZToke2lkfWA7XG52YXIgZ2V0SXRlbVByZXZpZXdJZCA9IChjdHgsIGlkKSA9PiBjdHguaWRzPy5pdGVtUHJldmlldz8uKGlkKSA/PyBgZmlsZToke2N0eC5pZH06aXRlbS1wcmV2aWV3OiR7aWR9YDtcbnZhciBnZXRSb290RWwgPSAoY3R4KSA9PiBjdHguZ2V0QnlJZChnZXRSb290SWQoY3R4KSk7XG52YXIgZ2V0SGlkZGVuSW5wdXRFbCA9IChjdHgpID0+IGN0eC5nZXRCeUlkKGdldEhpZGRlbklucHV0SWQoY3R4KSk7XG52YXIgZ2V0RHJvcHpvbmVFbCA9IChjdHgpID0+IGN0eC5nZXRCeUlkKGdldERyb3B6b25lSWQoY3R4KSk7XG5mdW5jdGlvbiBpc0V2ZW50V2l0aEZpbGVzKGV2ZW50KSB7XG4gIGNvbnN0IHRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgaWYgKCFldmVudC5kYXRhVHJhbnNmZXIpIHJldHVybiAhIXRhcmdldCAmJiBcImZpbGVzXCIgaW4gdGFyZ2V0O1xuICByZXR1cm4gZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzLnNvbWUoKHR5cGUpID0+IHtcbiAgICByZXR1cm4gdHlwZSA9PT0gXCJGaWxlc1wiIHx8IHR5cGUgPT09IFwiYXBwbGljYXRpb24veC1tb3otZmlsZVwiO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGlzRmlsZXNXaXRoaW5SYW5nZShjdHgsIGluY29taW5nQ291bnQsIGN1cnJlbnRBY2NlcHRlZEZpbGVzKSB7XG4gIGNvbnN0IHsgcHJvcCwgY29tcHV0ZWQgfSA9IGN0eDtcbiAgaWYgKCFjb21wdXRlZChcIm11bHRpcGxlXCIpICYmIGluY29taW5nQ291bnQgPiAxKSByZXR1cm4gZmFsc2U7XG4gIGlmICghY29tcHV0ZWQoXCJtdWx0aXBsZVwiKSAmJiBpbmNvbWluZ0NvdW50ICsgY3VycmVudEFjY2VwdGVkRmlsZXMubGVuZ3RoID09PSAyKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKGluY29taW5nQ291bnQgKyBjdXJyZW50QWNjZXB0ZWRGaWxlcy5sZW5ndGggPiBwcm9wKFwibWF4RmlsZXNcIikpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBnZXRFdmVudEZpbGVzKGN0eCwgZmlsZXMsIGN1cnJlbnRBY2NlcHRlZEZpbGVzID0gW10sIGN1cnJlbnRSZWplY3RlZEZpbGVzID0gW10pIHtcbiAgY29uc3QgeyBwcm9wLCBjb21wdXRlZCB9ID0gY3R4O1xuICBjb25zdCBhY2NlcHRlZEZpbGVzID0gW107XG4gIGNvbnN0IHJlamVjdGVkRmlsZXMgPSBbXTtcbiAgY29uc3QgdmFsaWRhdGVQYXJhbXMgPSB7XG4gICAgYWNjZXB0ZWRGaWxlczogY3VycmVudEFjY2VwdGVkRmlsZXMsXG4gICAgcmVqZWN0ZWRGaWxlczogY3VycmVudFJlamVjdGVkRmlsZXNcbiAgfTtcbiAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgIGNvbnN0IFthY2NlcHRlZCwgYWNjZXB0RXJyb3JdID0gaXNWYWxpZEZpbGVUeXBlKGZpbGUsIGNvbXB1dGVkKFwiYWNjZXB0QXR0clwiKSk7XG4gICAgY29uc3QgW3NpemVNYXRjaCwgc2l6ZUVycm9yXSA9IGlzVmFsaWRGaWxlU2l6ZShmaWxlLCBwcm9wKFwibWluRmlsZVNpemVcIiksIHByb3AoXCJtYXhGaWxlU2l6ZVwiKSk7XG4gICAgY29uc3QgdmFsaWRhdGVFcnJvcnMgPSBwcm9wKFwidmFsaWRhdGVcIik/LihmaWxlLCB2YWxpZGF0ZVBhcmFtcyk7XG4gICAgY29uc3QgdmFsaWQgPSB2YWxpZGF0ZUVycm9ycyA/IHZhbGlkYXRlRXJyb3JzLmxlbmd0aCA9PT0gMCA6IHRydWU7XG4gICAgaWYgKGFjY2VwdGVkICYmIHNpemVNYXRjaCAmJiB2YWxpZCkge1xuICAgICAgYWNjZXB0ZWRGaWxlcy5wdXNoKGZpbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBlcnJvcnMgPSBbYWNjZXB0RXJyb3IsIHNpemVFcnJvcl07XG4gICAgICBpZiAoIXZhbGlkKSBlcnJvcnMucHVzaCguLi52YWxpZGF0ZUVycm9ycyA/PyBbXSk7XG4gICAgICByZWplY3RlZEZpbGVzLnB1c2goeyBmaWxlLCBlcnJvcnM6IGVycm9ycy5maWx0ZXIoQm9vbGVhbikgfSk7XG4gICAgfVxuICB9KTtcbiAgaWYgKCFpc0ZpbGVzV2l0aGluUmFuZ2UoY3R4LCBhY2NlcHRlZEZpbGVzLmxlbmd0aCwgY3VycmVudEFjY2VwdGVkRmlsZXMpKSB7XG4gICAgYWNjZXB0ZWRGaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICByZWplY3RlZEZpbGVzLnB1c2goeyBmaWxlLCBlcnJvcnM6IFtcIlRPT19NQU5ZX0ZJTEVTXCJdIH0pO1xuICAgIH0pO1xuICAgIGFjY2VwdGVkRmlsZXMuc3BsaWNlKDApO1xuICB9XG4gIHJldHVybiB7XG4gICAgYWNjZXB0ZWRGaWxlcyxcbiAgICByZWplY3RlZEZpbGVzXG4gIH07XG59XG5mdW5jdGlvbiBzZXRJbnB1dEZpbGVzKGlucHV0RWwsIGZpbGVzKSB7XG4gIGNvbnN0IHdpbiA9IGdldFdpbmRvdyhpbnB1dEVsKTtcbiAgdHJ5IHtcbiAgICBpZiAoXCJEYXRhVHJhbnNmZXJcIiBpbiB3aW4pIHtcbiAgICAgIGNvbnN0IGRhdGFUcmFuc2ZlciA9IG5ldyB3aW4uRGF0YVRyYW5zZmVyKCk7XG4gICAgICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICAgIGRhdGFUcmFuc2Zlci5pdGVtcy5hZGQoZmlsZSk7XG4gICAgICB9KTtcbiAgICAgIGlucHV0RWwuZmlsZXMgPSBkYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgfVxufVxuXG4vLyBzcmMvZmlsZS11cGxvYWQuY29ubmVjdC50c1xuZnVuY3Rpb24gY29ubmVjdChzZXJ2aWNlLCBub3JtYWxpemUpIHtcbiAgY29uc3QgeyBzdGF0ZSwgc2VuZCwgcHJvcCwgY29tcHV0ZWQsIHNjb3BlLCBjb250ZXh0IH0gPSBzZXJ2aWNlO1xuICBjb25zdCBkaXNhYmxlZCA9IHByb3AoXCJkaXNhYmxlZFwiKTtcbiAgY29uc3QgYWxsb3dEcm9wID0gcHJvcChcImFsbG93RHJvcFwiKTtcbiAgY29uc3QgdHJhbnNsYXRpb25zID0gcHJvcChcInRyYW5zbGF0aW9uc1wiKTtcbiAgY29uc3QgZHJhZ2dpbmcgPSBzdGF0ZS5tYXRjaGVzKFwiZHJhZ2dpbmdcIik7XG4gIGNvbnN0IGZvY3VzZWQgPSBzdGF0ZS5tYXRjaGVzKFwiZm9jdXNlZFwiKSAmJiAhZGlzYWJsZWQ7XG4gIHJldHVybiB7XG4gICAgZHJhZ2dpbmcsXG4gICAgZm9jdXNlZCxcbiAgICBkaXNhYmxlZDogISFkaXNhYmxlZCxcbiAgICB0cmFuc2Zvcm1pbmc6IGNvbnRleHQuZ2V0KFwidHJhbnNmb3JtaW5nXCIpLFxuICAgIG9wZW5GaWxlUGlja2VyKCkge1xuICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG4gICAgICBzZW5kKHsgdHlwZTogXCJPUEVOXCIgfSk7XG4gICAgfSxcbiAgICBkZWxldGVGaWxlKGZpbGUpIHtcbiAgICAgIHNlbmQoeyB0eXBlOiBcIkZJTEUuREVMRVRFXCIsIGZpbGUgfSk7XG4gICAgfSxcbiAgICBhY2NlcHRlZEZpbGVzOiBjb250ZXh0LmdldChcImFjY2VwdGVkRmlsZXNcIiksXG4gICAgcmVqZWN0ZWRGaWxlczogY29udGV4dC5nZXQoXCJyZWplY3RlZEZpbGVzXCIpLFxuICAgIHNldEZpbGVzKGZpbGVzKSB7XG4gICAgICBzZW5kKHsgdHlwZTogXCJGSUxFUy5TRVRcIiwgZmlsZXMsIGNvdW50OiBmaWxlcy5sZW5ndGggfSk7XG4gICAgfSxcbiAgICBjbGVhclJlamVjdGVkRmlsZXMoKSB7XG4gICAgICBzZW5kKHsgdHlwZTogXCJSRUpFQ1RFRF9GSUxFUy5DTEVBUlwiIH0pO1xuICAgIH0sXG4gICAgY2xlYXJGaWxlcygpIHtcbiAgICAgIHNlbmQoeyB0eXBlOiBcIkZJTEVTLkNMRUFSXCIgfSk7XG4gICAgfSxcbiAgICBnZXRGaWxlU2l6ZShmaWxlKSB7XG4gICAgICByZXR1cm4gZm9ybWF0Qnl0ZXMoZmlsZS5zaXplLCBwcm9wKFwibG9jYWxlXCIpKTtcbiAgICB9LFxuICAgIGNyZWF0ZUZpbGVVcmwoZmlsZSwgY2IpIHtcbiAgICAgIGNvbnN0IHdpbiA9IHNjb3BlLmdldFdpbigpO1xuICAgICAgY29uc3QgdXJsID0gd2luLlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICBjYih1cmwpO1xuICAgICAgcmV0dXJuICgpID0+IHdpbi5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgfSxcbiAgICBzZXRDbGlwYm9hcmRGaWxlcyhkdCkge1xuICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oZHQ/Lml0ZW1zID8/IFtdKTtcbiAgICAgIGNvbnN0IGZpbGVzID0gaXRlbXMucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0ua2luZCAhPT0gXCJmaWxlXCIpIHJldHVybiBhY2M7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBpdGVtLmdldEFzRmlsZSgpO1xuICAgICAgICBpZiAoIWZpbGUpIHJldHVybiBhY2M7XG4gICAgICAgIHJldHVybiBbLi4uYWNjLCBmaWxlXTtcbiAgICAgIH0sIFtdKTtcbiAgICAgIGlmICghZmlsZXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICBzZW5kKHsgdHlwZTogXCJGSUxFUy5TRVRcIiwgZmlsZXMgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGdldFJvb3RQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLnJvb3QuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaWQ6IGdldFJvb3RJZChzY29wZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1kcmFnZ2luZ1wiOiBkYXRhQXR0cihkcmFnZ2luZylcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0RHJvcHpvbmVQcm9wcyhwcm9wczIgPSB7fSkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuZHJvcHpvbmUuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaWQ6IGdldERyb3B6b25lSWQoc2NvcGUpLFxuICAgICAgICB0YWJJbmRleDogZGlzYWJsZWQgfHwgcHJvcHMyLmRpc2FibGVDbGljayA/IHZvaWQgMCA6IDAsXG4gICAgICAgIHJvbGU6IHByb3BzMi5kaXNhYmxlQ2xpY2sgPyBcImFwcGxpY2F0aW9uXCIgOiBcImJ1dHRvblwiLFxuICAgICAgICBcImFyaWEtbGFiZWxcIjogdHJhbnNsYXRpb25zLmRyb3B6b25lLFxuICAgICAgICBcImFyaWEtZGlzYWJsZWRcIjogZGlzYWJsZWQsXG4gICAgICAgIFwiZGF0YS1pbnZhbGlkXCI6IGRhdGFBdHRyKHByb3AoXCJpbnZhbGlkXCIpKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKSxcbiAgICAgICAgXCJkYXRhLWRyYWdnaW5nXCI6IGRhdGFBdHRyKGRyYWdnaW5nKSxcbiAgICAgICAgb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcbiAgICAgICAgICBpZiAoIWlzU2VsZlRhcmdldChldmVudCkpIHJldHVybjtcbiAgICAgICAgICBpZiAocHJvcHMyLmRpc2FibGVDbGljaykgcmV0dXJuO1xuICAgICAgICAgIGlmIChldmVudC5rZXkgIT09IFwiRW50ZXJcIiAmJiBldmVudC5rZXkgIT09IFwiIFwiKSByZXR1cm47XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiRFJPUFpPTkUuQ0xJQ0tcIiwgc3JjOiBcImtleWRvd25cIiB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25DbGljayhldmVudCkge1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKHByb3BzMi5kaXNhYmxlQ2xpY2spIHJldHVybjtcbiAgICAgICAgICBpZiAoIWlzU2VsZlRhcmdldChldmVudCkpIHJldHVybjtcbiAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5sb2NhbE5hbWUgPT09IFwibGFiZWxcIikge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiRFJPUFpPTkUuQ0xJQ0tcIiB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25EcmFnT3ZlcihldmVudCkge1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmICghYWxsb3dEcm9wKSByZXR1cm47XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcImNvcHlcIjtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgaGFzRmlsZXMgPSBpc0V2ZW50V2l0aEZpbGVzKGV2ZW50KTtcbiAgICAgICAgICBpZiAoIWhhc0ZpbGVzKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgY291bnQgPSBldmVudC5kYXRhVHJhbnNmZXIuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkRST1BaT05FLkRSQUdfT1ZFUlwiLCBjb3VudCB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25EcmFnTGVhdmUoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBpZiAoIWFsbG93RHJvcCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChjb250YWlucyhldmVudC5jdXJyZW50VGFyZ2V0LCBldmVudC5yZWxhdGVkVGFyZ2V0KSkgcmV0dXJuO1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkRST1BaT05FLkRSQUdfTEVBVkVcIiB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25Ecm9wKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKGFsbG93RHJvcCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBoYXNGaWxlcyA9IGlzRXZlbnRXaXRoRmlsZXMoZXZlbnQpO1xuICAgICAgICAgIGlmIChkaXNhYmxlZCB8fCAhaGFzRmlsZXMpIHJldHVybjtcbiAgICAgICAgICBnZXRGaWxlRW50cmllcyhldmVudC5kYXRhVHJhbnNmZXIuaXRlbXMsIHByb3AoXCJkaXJlY3RvcnlcIikpLnRoZW4oKGZpbGVzKSA9PiB7XG4gICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJEUk9QWk9ORS5EUk9QXCIsIGZpbGVzOiBmbGF0QXJyYXkoZmlsZXMpIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkZvY3VzKCkge1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkRST1BaT05FLkZPQ1VTXCIgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQmx1cigpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJEUk9QWk9ORS5CTFVSXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0VHJpZ2dlclByb3BzKCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5idXR0b24oe1xuICAgICAgICAuLi5wYXJ0cy50cmlnZ2VyLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGlkOiBnZXRUcmlnZ2VySWQoc2NvcGUpLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKSxcbiAgICAgICAgXCJkYXRhLWludmFsaWRcIjogZGF0YUF0dHIocHJvcChcImludmFsaWRcIikpLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKGNvbnRhaW5zKGdldERyb3B6b25lRWwoc2NvcGUpLCBldmVudC5jdXJyZW50VGFyZ2V0KSkge1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIk9QRU5cIiB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRIaWRkZW5JbnB1dFByb3BzKCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5pbnB1dCh7XG4gICAgICAgIGlkOiBnZXRIaWRkZW5JbnB1dElkKHNjb3BlKSxcbiAgICAgICAgdGFiSW5kZXg6IC0xLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgdHlwZTogXCJmaWxlXCIsXG4gICAgICAgIHJlcXVpcmVkOiBwcm9wKFwicmVxdWlyZWRcIiksXG4gICAgICAgIGNhcHR1cmU6IHByb3AoXCJjYXB0dXJlXCIpLFxuICAgICAgICBuYW1lOiBwcm9wKFwibmFtZVwiKSxcbiAgICAgICAgYWNjZXB0OiBjb21wdXRlZChcImFjY2VwdEF0dHJcIiksXG4gICAgICAgIHdlYmtpdGRpcmVjdG9yeTogcHJvcChcImRpcmVjdG9yeVwiKSA/IFwiXCIgOiB2b2lkIDAsXG4gICAgICAgIG11bHRpcGxlOiBjb21wdXRlZChcIm11bHRpcGxlXCIpIHx8IHByb3AoXCJtYXhGaWxlc1wiKSA+IDEsXG4gICAgICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgfSxcbiAgICAgICAgb25JbnB1dChldmVudCkge1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IHsgZmlsZXMgfSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiRklMRS5TRUxFQ1RcIiwgZmlsZXM6IGZpbGVzID8gQXJyYXkuZnJvbShmaWxlcykgOiBbXSB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHZpc3VhbGx5SGlkZGVuU3R5bGVcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SXRlbUdyb3VwUHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5pdGVtR3JvdXAuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRJdGVtUHJvcHMocHJvcHMyKSB7XG4gICAgICBjb25zdCB7IGZpbGUgfSA9IHByb3BzMjtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLml0ZW0uYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaWQ6IGdldEl0ZW1JZChzY29wZSwgZmlsZS5uYW1lKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRJdGVtTmFtZVByb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBmaWxlIH0gPSBwcm9wczI7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5pdGVtTmFtZS5hdHRycyxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICBpZDogZ2V0SXRlbU5hbWVJZChzY29wZSwgZmlsZS5uYW1lKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRJdGVtU2l6ZVRleHRQcm9wcyhwcm9wczIpIHtcbiAgICAgIGNvbnN0IHsgZmlsZSB9ID0gcHJvcHMyO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuaXRlbVNpemVUZXh0LmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGlkOiBnZXRJdGVtU2l6ZVRleHRJZChzY29wZSwgZmlsZS5uYW1lKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRJdGVtUHJldmlld1Byb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBmaWxlIH0gPSBwcm9wczI7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5pdGVtUHJldmlldy5hdHRycyxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICBpZDogZ2V0SXRlbVByZXZpZXdJZChzY29wZSwgZmlsZS5uYW1lKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRJdGVtUHJldmlld0ltYWdlUHJvcHMocHJvcHMyKSB7XG4gICAgICBjb25zdCB7IGZpbGUsIHVybCB9ID0gcHJvcHMyO1xuICAgICAgY29uc3QgaXNJbWFnZSA9IGZpbGUudHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpO1xuICAgICAgaWYgKCFpc0ltYWdlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByZXZpZXcgSW1hZ2UgaXMgb25seSBzdXBwb3J0ZWQgZm9yIGltYWdlIGZpbGVzXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5pbWcoe1xuICAgICAgICAuLi5wYXJ0cy5pdGVtUHJldmlld0ltYWdlLmF0dHJzLFxuICAgICAgICBhbHQ6IHRyYW5zbGF0aW9ucy5pdGVtUHJldmlldz8uKGZpbGUpLFxuICAgICAgICBzcmM6IHVybCxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRJdGVtRGVsZXRlVHJpZ2dlclByb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBmaWxlIH0gPSBwcm9wczI7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmJ1dHRvbih7XG4gICAgICAgIC4uLnBhcnRzLml0ZW1EZWxldGVUcmlnZ2VyLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgIGRpc2FibGVkLFxuICAgICAgICBcImRhdGEtZGlzYWJsZWRcIjogZGF0YUF0dHIoZGlzYWJsZWQpLFxuICAgICAgICBcImFyaWEtbGFiZWxcIjogdHJhbnNsYXRpb25zLmRlbGV0ZUZpbGU/LihmaWxlKSxcbiAgICAgICAgb25DbGljaygpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJGSUxFLkRFTEVURVwiLCBmaWxlIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldExhYmVsUHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmxhYmVsKHtcbiAgICAgICAgLi4ucGFydHMubGFiZWwuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaWQ6IGdldExhYmVsSWQoc2NvcGUpLFxuICAgICAgICBodG1sRm9yOiBnZXRIaWRkZW5JbnB1dElkKHNjb3BlKSxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRDbGVhclRyaWdnZXJQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuYnV0dG9uKHtcbiAgICAgICAgLi4ucGFydHMuY2xlYXJUcmlnZ2VyLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgIGRpc2FibGVkLFxuICAgICAgICBoaWRkZW46IGNvbnRleHQuZ2V0KFwiYWNjZXB0ZWRGaWxlc1wiKS5sZW5ndGggPT09IDAsXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkZJTEVTLkNMRUFSXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cbnZhciBtYWNoaW5lID0gY3JlYXRlTWFjaGluZSh7XG4gIHByb3BzKHsgcHJvcHM6IHByb3BzMiB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1pbkZpbGVTaXplOiAwLFxuICAgICAgbWF4RmlsZVNpemU6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSxcbiAgICAgIG1heEZpbGVzOiAxLFxuICAgICAgYWxsb3dEcm9wOiB0cnVlLFxuICAgICAgcHJldmVudERvY3VtZW50RHJvcDogdHJ1ZSxcbiAgICAgIGRlZmF1bHRBY2NlcHRlZEZpbGVzOiBbXSxcbiAgICAgIC4uLnByb3BzMixcbiAgICAgIHRyYW5zbGF0aW9uczoge1xuICAgICAgICBkcm9wem9uZTogXCJkcm9wem9uZVwiLFxuICAgICAgICBpdGVtUHJldmlldzogKGZpbGUpID0+IGBwcmV2aWV3IG9mICR7ZmlsZS5uYW1lfWAsXG4gICAgICAgIGRlbGV0ZUZpbGU6IChmaWxlKSA9PiBgZGVsZXRlIGZpbGUgJHtmaWxlLm5hbWV9YCxcbiAgICAgICAgLi4ucHJvcHMyLnRyYW5zbGF0aW9uc1xuICAgICAgfVxuICAgIH07XG4gIH0sXG4gIGluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4gXCJpZGxlXCI7XG4gIH0sXG4gIGNvbnRleHQoeyBwcm9wLCBiaW5kYWJsZSwgZ2V0Q29udGV4dCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2VwdGVkRmlsZXM6IGJpbmRhYmxlKCgpID0+ICh7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogcHJvcChcImRlZmF1bHRBY2NlcHRlZEZpbGVzXCIpLFxuICAgICAgICB2YWx1ZTogcHJvcChcImFjY2VwdGVkRmlsZXNcIiksXG4gICAgICAgIGlzRXF1YWw6IChhLCBiKSA9PiBhLmxlbmd0aCA9PT0gYj8ubGVuZ3RoICYmIGEuZXZlcnkoKGZpbGUsIGkpID0+IGlzRmlsZUVxdWFsKGZpbGUsIGJbaV0pKSxcbiAgICAgICAgaGFzaCh2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGZpbGUpID0+IGAke2ZpbGUubmFtZX0tJHtmaWxlLnNpemV9YCkuam9pbihcIixcIik7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgY3R4ID0gZ2V0Q29udGV4dCgpO1xuICAgICAgICAgIHByb3AoXCJvbkZpbGVBY2NlcHRcIik/Lih7IGZpbGVzOiB2YWx1ZSB9KTtcbiAgICAgICAgICBwcm9wKFwib25GaWxlQ2hhbmdlXCIpPy4oeyBhY2NlcHRlZEZpbGVzOiB2YWx1ZSwgcmVqZWN0ZWRGaWxlczogY3R4LmdldChcInJlamVjdGVkRmlsZXNcIikgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pKSxcbiAgICAgIHJlamVjdGVkRmlsZXM6IGJpbmRhYmxlKCgpID0+ICh7XG4gICAgICAgIGRlZmF1bHRWYWx1ZTogW10sXG4gICAgICAgIGlzRXF1YWw6IChhLCBiKSA9PiBhLmxlbmd0aCA9PT0gYj8ubGVuZ3RoICYmIGEuZXZlcnkoKGZpbGUsIGkpID0+IGlzRmlsZUVxdWFsKGZpbGUuZmlsZSwgYltpXS5maWxlKSksXG4gICAgICAgIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgY3R4ID0gZ2V0Q29udGV4dCgpO1xuICAgICAgICAgIHByb3AoXCJvbkZpbGVSZWplY3RcIik/Lih7IGZpbGVzOiB2YWx1ZSB9KTtcbiAgICAgICAgICBwcm9wKFwib25GaWxlQ2hhbmdlXCIpPy4oeyBhY2NlcHRlZEZpbGVzOiBjdHguZ2V0KFwiYWNjZXB0ZWRGaWxlc1wiKSwgcmVqZWN0ZWRGaWxlczogdmFsdWUgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pKSxcbiAgICAgIHRyYW5zZm9ybWluZzogYmluZGFibGUoKCkgPT4gKHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZVxuICAgICAgfSkpXG4gICAgfTtcbiAgfSxcbiAgY29tcHV0ZWQ6IHtcbiAgICBhY2NlcHRBdHRyOiAoeyBwcm9wIH0pID0+IGdldEFjY2VwdEF0dHJTdHJpbmcocHJvcChcImFjY2VwdFwiKSksXG4gICAgbXVsdGlwbGU6ICh7IHByb3AgfSkgPT4gcHJvcChcIm1heEZpbGVzXCIpID4gMVxuICB9LFxuICB3YXRjaCh7IHRyYWNrLCBjb250ZXh0LCBhY3Rpb24gfSkge1xuICAgIHRyYWNrKFsoKSA9PiBjb250ZXh0Lmhhc2goXCJhY2NlcHRlZEZpbGVzXCIpXSwgKCkgPT4ge1xuICAgICAgYWN0aW9uKFtcInN5bmNJbnB1dEVsZW1lbnRcIl0pO1xuICAgIH0pO1xuICB9LFxuICBvbjoge1xuICAgIFwiRklMRVMuU0VUXCI6IHtcbiAgICAgIGFjdGlvbnM6IFtcInNldEZpbGVzXCJdXG4gICAgfSxcbiAgICBcIkZJTEUuU0VMRUNUXCI6IHtcbiAgICAgIGFjdGlvbnM6IFtcInNldEV2ZW50RmlsZXNcIl1cbiAgICB9LFxuICAgIFwiRklMRS5ERUxFVEVcIjoge1xuICAgICAgYWN0aW9uczogW1wicmVtb3ZlRmlsZVwiXVxuICAgIH0sXG4gICAgXCJGSUxFUy5DTEVBUlwiOiB7XG4gICAgICBhY3Rpb25zOiBbXCJjbGVhckZpbGVzXCJdXG4gICAgfSxcbiAgICBcIlJFSkVDVEVEX0ZJTEVTLkNMRUFSXCI6IHtcbiAgICAgIGFjdGlvbnM6IFtcImNsZWFyUmVqZWN0ZWRGaWxlc1wiXVxuICAgIH1cbiAgfSxcbiAgZWZmZWN0czogW1wicHJldmVudERvY3VtZW50RHJvcFwiXSxcbiAgc3RhdGVzOiB7XG4gICAgaWRsZToge1xuICAgICAgb246IHtcbiAgICAgICAgT1BFTjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcIm9wZW5GaWxlUGlja2VyXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiRFJPUFpPTkUuQ0xJQ0tcIjoge1xuICAgICAgICAgIGFjdGlvbnM6IFtcIm9wZW5GaWxlUGlja2VyXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiRFJPUFpPTkUuRk9DVVNcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJmb2N1c2VkXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJEUk9QWk9ORS5EUkFHX09WRVJcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJkcmFnZ2luZ1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGZvY3VzZWQ6IHtcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiRFJPUFpPTkUuQkxVUlwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcImlkbGVcIlxuICAgICAgICB9LFxuICAgICAgICBPUEVOOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wib3BlbkZpbGVQaWNrZXJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJEUk9QWk9ORS5DTElDS1wiOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wib3BlbkZpbGVQaWNrZXJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJEUk9QWk9ORS5EUkFHX09WRVJcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJkcmFnZ2luZ1wiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGRyYWdnaW5nOiB7XG4gICAgICBvbjoge1xuICAgICAgICBcIkRST1BaT05FLkRST1BcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJpZGxlXCIsXG4gICAgICAgICAgYWN0aW9uczogW1wic2V0RXZlbnRGaWxlc1wiXVxuICAgICAgICB9LFxuICAgICAgICBcIkRST1BaT05FLkRSQUdfTEVBVkVcIjoge1xuICAgICAgICAgIHRhcmdldDogXCJpZGxlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgaW1wbGVtZW50YXRpb25zOiB7XG4gICAgZWZmZWN0czoge1xuICAgICAgcHJldmVudERvY3VtZW50RHJvcCh7IHByb3AsIHNjb3BlIH0pIHtcbiAgICAgICAgaWYgKCFwcm9wKFwicHJldmVudERvY3VtZW50RHJvcFwiKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXByb3AoXCJhbGxvd0Ryb3BcIikpIHJldHVybjtcbiAgICAgICAgaWYgKHByb3AoXCJkaXNhYmxlZFwiKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBkb2MgPSBzY29wZS5nZXREb2MoKTtcbiAgICAgICAgY29uc3Qgb25EcmFnT3ZlciA9IChldmVudCkgPT4ge1xuICAgICAgICAgIGV2ZW50Py5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvbkRyb3AgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICBpZiAoY29udGFpbnMoZ2V0Um9vdEVsKHNjb3BlKSwgZ2V0RXZlbnRUYXJnZXQoZXZlbnQpKSkgcmV0dXJuO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBjYWxsQWxsKGFkZERvbUV2ZW50KGRvYywgXCJkcmFnb3ZlclwiLCBvbkRyYWdPdmVyLCBmYWxzZSksIGFkZERvbUV2ZW50KGRvYywgXCJkcm9wXCIsIG9uRHJvcCwgZmFsc2UpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFjdGlvbnM6IHtcbiAgICAgIHN5bmNJbnB1dEVsZW1lbnQoeyBzY29wZSwgY29udGV4dCB9KSB7XG4gICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBpbnB1dEVsID0gZ2V0SGlkZGVuSW5wdXRFbChzY29wZSk7XG4gICAgICAgICAgaWYgKCFpbnB1dEVsKSByZXR1cm47XG4gICAgICAgICAgc2V0SW5wdXRGaWxlcyhpbnB1dEVsLCBjb250ZXh0LmdldChcImFjY2VwdGVkRmlsZXNcIikpO1xuICAgICAgICAgIGNvbnN0IHdpbiA9IHNjb3BlLmdldFdpbigpO1xuICAgICAgICAgIGlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgd2luLkV2ZW50KFwiY2hhbmdlXCIsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIG9wZW5GaWxlUGlja2VyKHsgc2NvcGUgfSkge1xuICAgICAgICByYWYoKCkgPT4ge1xuICAgICAgICAgIGdldEhpZGRlbklucHV0RWwoc2NvcGUpPy5jbGljaygpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBzZXRGaWxlcyhwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyBjb21wdXRlZCwgY29udGV4dCwgZXZlbnQgfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgeyBhY2NlcHRlZEZpbGVzLCByZWplY3RlZEZpbGVzIH0gPSBnZXRFdmVudEZpbGVzKHBhcmFtcywgZXZlbnQuZmlsZXMpO1xuICAgICAgICBjb250ZXh0LnNldChcbiAgICAgICAgICBcImFjY2VwdGVkRmlsZXNcIixcbiAgICAgICAgICBjb21wdXRlZChcIm11bHRpcGxlXCIpID8gYWNjZXB0ZWRGaWxlcyA6IGFjY2VwdGVkRmlsZXMubGVuZ3RoID4gMCA/IFthY2NlcHRlZEZpbGVzWzBdXSA6IFtdXG4gICAgICAgICk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCByZWplY3RlZEZpbGVzKTtcbiAgICAgIH0sXG4gICAgICBzZXRFdmVudEZpbGVzKHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IGNvbXB1dGVkLCBjb250ZXh0LCBldmVudCwgcHJvcCB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCBjdXJyZW50QWNjZXB0ZWRGaWxlcyA9IGNvbnRleHQuZ2V0KFwiYWNjZXB0ZWRGaWxlc1wiKTtcbiAgICAgICAgY29uc3QgY3VycmVudFJlamVjdGVkRmlsZXMgPSBjb250ZXh0LmdldChcInJlamVjdGVkRmlsZXNcIik7XG4gICAgICAgIGNvbnN0IHsgYWNjZXB0ZWRGaWxlcywgcmVqZWN0ZWRGaWxlcyB9ID0gZ2V0RXZlbnRGaWxlcyhcbiAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgZXZlbnQuZmlsZXMsXG4gICAgICAgICAgY3VycmVudEFjY2VwdGVkRmlsZXMsXG4gICAgICAgICAgY3VycmVudFJlamVjdGVkRmlsZXNcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc2V0ID0gKGZpbGVzKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbXB1dGVkKFwibXVsdGlwbGVcIikpIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCAocHJldikgPT4gWy4uLnByZXYsIC4uLmZpbGVzXSk7XG4gICAgICAgICAgICBjb250ZXh0LnNldChcInJlamVjdGVkRmlsZXNcIiwgcmVqZWN0ZWRGaWxlcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCBbZmlsZXNbMF1dKTtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCByZWplY3RlZEZpbGVzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlamVjdGVkRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNldChcImFjY2VwdGVkRmlsZXNcIiwgY29udGV4dC5nZXQoXCJhY2NlcHRlZEZpbGVzXCIpKTtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCByZWplY3RlZEZpbGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHByb3AoXCJ0cmFuc2Zvcm1GaWxlc1wiKTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICAgIGNvbnRleHQuc2V0KFwidHJhbnNmb3JtaW5nXCIsIHRydWUpO1xuICAgICAgICAgIHRyYW5zZm9ybShhY2NlcHRlZEZpbGVzKS50aGVuKHNldCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgd2FybihgW3phZy1qcy9maWxlLXVwbG9hZF0gZXJyb3IgdHJhbnNmb3JtaW5nIGZpbGVzXG4ke2Vycn1gKTtcbiAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwidHJhbnNmb3JtaW5nXCIsIGZhbHNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXQoYWNjZXB0ZWRGaWxlcyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZW1vdmVGaWxlKHsgY29udGV4dCwgZXZlbnQgfSkge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGNvbnRleHQuZ2V0KFwiYWNjZXB0ZWRGaWxlc1wiKS5maWx0ZXIoKGZpbGUpID0+ICFpc0ZpbGVFcXVhbChmaWxlLCBldmVudC5maWxlKSk7XG4gICAgICAgIGNvbnN0IHJlamVjdGVkRmlsZXMgPSBjb250ZXh0LmdldChcInJlamVjdGVkRmlsZXNcIikuZmlsdGVyKChpdGVtKSA9PiAhaXNGaWxlRXF1YWwoaXRlbS5maWxlLCBldmVudC5maWxlKSk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCBmaWxlcyk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCByZWplY3RlZEZpbGVzKTtcbiAgICAgIH0sXG4gICAgICBjbGVhclJlamVjdGVkRmlsZXMoeyBjb250ZXh0IH0pIHtcbiAgICAgICAgY29udGV4dC5zZXQoXCJyZWplY3RlZEZpbGVzXCIsIFtdKTtcbiAgICAgIH0sXG4gICAgICBjbGVhckZpbGVzKHsgY29udGV4dCB9KSB7XG4gICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCBbXSk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCBbXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbnZhciBwcm9wcyA9IGNyZWF0ZVByb3BzKCkoW1xuICBcImFjY2VwdFwiLFxuICBcImFjY2VwdGVkRmlsZXNcIixcbiAgXCJhbGxvd0Ryb3BcIixcbiAgXCJjYXB0dXJlXCIsXG4gIFwiZGVmYXVsdEFjY2VwdGVkRmlsZXNcIixcbiAgXCJkaXJcIixcbiAgXCJkaXJlY3RvcnlcIixcbiAgXCJkaXNhYmxlZFwiLFxuICBcImdldFJvb3ROb2RlXCIsXG4gIFwiaWRcIixcbiAgXCJpZHNcIixcbiAgXCJpbnZhbGlkXCIsXG4gIFwibG9jYWxlXCIsXG4gIFwibWF4RmlsZXNcIixcbiAgXCJtYXhGaWxlU2l6ZVwiLFxuICBcIm1pbkZpbGVTaXplXCIsXG4gIFwibmFtZVwiLFxuICBcIm9uRmlsZUFjY2VwdFwiLFxuICBcIm9uRmlsZUNoYW5nZVwiLFxuICBcIm9uRmlsZVJlamVjdFwiLFxuICBcInByZXZlbnREb2N1bWVudERyb3BcIixcbiAgXCJyZXF1aXJlZFwiLFxuICBcInRyYW5zZm9ybUZpbGVzXCIsXG4gIFwidHJhbnNsYXRpb25zXCIsXG4gIFwidmFsaWRhdGVcIlxuXSk7XG52YXIgc3BsaXRQcm9wcyA9IGNyZWF0ZVNwbGl0UHJvcHMocHJvcHMpO1xudmFyIGl0ZW1Qcm9wcyA9IGNyZWF0ZVByb3BzKCkoW1wiZmlsZVwiXSk7XG52YXIgc3BsaXRJdGVtUHJvcHMgPSBjcmVhdGVTcGxpdFByb3BzKGl0ZW1Qcm9wcyk7XG5cbmV4cG9ydCB7IGFuYXRvbXksIGNvbm5lY3QsIGl0ZW1Qcm9wcywgbWFjaGluZSwgcHJvcHMsIHNwbGl0SXRlbVByb3BzLCBzcGxpdFByb3BzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@zag-js+file-upload@1.21.7/node_modules/@zag-js/file-upload/dist/index.mjs\n");

/***/ })

};
;